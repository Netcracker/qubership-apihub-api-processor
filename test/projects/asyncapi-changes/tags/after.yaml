asyncapi: 3.0.0
info:
  title: Test AsyncAPI
  version: 1.0.0
channels:
  userSignup:
    address: user/signup
    messages:
      userSignedUp:
        $ref: '#/components/messages/UserSignedUp'
  userUpdate:
    address: user/update
    messages:
      userUpdated:
        $ref: '#/components/messages/UserUpdated'
  orderCreate:
    address: order/create
    messages:
      orderCreated:
        $ref: '#/components/messages/OrderCreated'
  orderUpdate:
    address: order/update
    messages:
      orderUpdated:
        $ref: '#/components/messages/OrderUpdated'
  orderDelete:
    address: order/delete
    messages:
      orderDeleted:
        $ref: '#/components/messages/OrderDeleted'
operations:
  added1:
    action: receive
    channel:
      $ref: '#/channels/userSignup'
    tags:
      - name: sameTagInDifferentChannels1
      - name: sameTagInDifferentChannels3
  added2:
    action: send
    channel:
      $ref: '#/channels/userUpdate'
    tags:
      - name: sameTagInDifferentChannels1
      - name: sameTagInDifferentChannels3
      - name: sameTagInDifferentSiblings2
  added3:
    action: receive
    channel:
      $ref: '#/channels/orderCreate'
    tags:
      - name: sameTagInDifferentSiblings2
  changed1:
    action: send
    channel:
      $ref: '#/channels/orderUpdate'
    tags:
      - name: sameTagInOperationSiblings1
      - name: sameTagInDifferentSiblings3
      - name: tag
  changed2:
    action: receive
    channel:
      $ref: '#/channels/orderDelete'
    tags:
      - name: sameTagInDifferentSiblings3
components:
  messages:
    UserSignedUp:
      payload:
        type: object
        properties:
          userId:
            type: string
    UserUpdated:
      payload:
        type: object
        properties:
          userId:
            type: string
    OrderCreated:
      payload:
        type: object
        properties:
          orderId:
            type: string
    OrderUpdated:
      payload:
        type: object
        properties:
          orderId:
            type: string
    OrderDeleted:
      payload:
        type: object
        properties:
          orderId:
            type: string
